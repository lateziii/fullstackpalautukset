{"ast":null,"code":"import _objectSpread from\"/Users/lauriturkia/OneDrive - O365 Turun yliopisto/fullstackpalautukset/fullstackpalautukset/02/puhelinluettelo/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/lauriturkia/OneDrive - O365 Turun yliopisto/fullstackpalautukset/fullstackpalautukset/02/puhelinluettelo/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Filter from\"./components/Filter.js\";import Persons from\"./components/Persons.js\";import personService from'./services/persons.js';import Alert from\"./components/Alert.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];useEffect(function(){console.log('effect');personService.getAll().then(function(initialPersons){setPersons(initialPersons);});},[]);console.log('render',persons.length,'persons',typeof persons);var handleNameChange=function handleNameChange(event){console.log(event.target.value);setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){console.log(event.target.value);setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){console.log(event.target.value);setNewFilter(event.target.value);};var handleEdit=function handleEdit(person){var newObject=personService.update(person);newObject.then(function(updatedPerson){setPersons(persons.map(function(person){return person.id!==updatedPerson.id?person:updatedPerson;}));setNewName('');setNewNumber('');setError(false);setMessage(\"Changed number for \".concat(newName));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){setError(true);console.log(error);setMessage(\"\".concat(person.name,\" removed already\"));setTimeout(function(){setMessage(null);},5000);}).finally(function(){setPersons(persons.map(function(p){return p.id!==person.id?p:person;}));});};var addPerson=function addPerson(event){event.preventDefault();console.log('button clicked',event.target);console.log(newName);console.log(newNumber);var personToFind=persons.find(function(person){return person.name===newName;});if(personToFind){var response=window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"));if(response){var person=persons.find(function(person){return person.name===newName;});return handleEdit(_objectSpread(_objectSpread({},person),{},{number:newNumber}));}}else{var personObject={name:newName,number:newNumber};personService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');setError(false);setMessage(\"Added \".concat(newName));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){console.log(\"olen täällä\");setError(true);setMessage(error);console.log(\"mutta en täällä\");setTimeout(function(){setMessage(null);},5000);});}};var handleRemove=function handleRemove(person){var response=window.confirm(\"Poistetaanko \".concat(person.name));if(response){personService.remove(person).then(function(){var newPersons=persons.filter(function(p){return p.id!==person.id;});setPersons(newPersons);setError(false);console.log(error);setMessage(\"Removed \".concat(person.name));setTimeout(function(){setMessage(null);},5000);}).catch(function(error){setError(true);console.log(error);setMessage(\"\".concat(person.name,\" removed already\"));setTimeout(function(){setMessage(null);},5000);}).finally(function(){var newPersons=persons.filter(function(poistettu){return poistettu.id!==person.id;});setPersons(newPersons);});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Alert,{message:message,error:error}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:setNewFilter,children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Filter,{onFilterChange:handleFilterChange,filter:newFilter})})}),/*#__PURE__*/_jsx(\"h2\",{children:\"add a new\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addPerson,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{value:newName,onChange:handleNameChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{value:newNumber,onChange:handleNumberChange})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"add\"})})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Persons,{persons:persons,filter:newFilter,onRemove:handleRemove})})]});};export default App;","map":{"version":3,"sources":["/Users/lauriturkia/OneDrive - O365 Turun yliopisto/fullstackpalautukset/fullstackpalautukset/02/puhelinluettelo/src/App.js"],"names":["React","useState","useEffect","Filter","Persons","personService","Alert","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","message","setMessage","error","setError","console","log","getAll","then","initialPersons","length","handleNameChange","event","target","value","handleNumberChange","handleFilterChange","handleEdit","person","newObject","update","updatedPerson","map","id","setTimeout","catch","name","finally","p","addPerson","preventDefault","personToFind","find","response","window","confirm","number","personObject","create","returnedPerson","concat","handleRemove","remove","newPersons","filter","poistettu"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Filter from \"./components/Filter.js\"\nimport Persons from \"./components/Persons.js\"\nimport personService  from './services/persons.js'\nimport Alert from \"./components/Alert.js\"\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [message, setMessage] = useState()\n  const [error, setError] =useState(false)\n\n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n        .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons', typeof(persons))\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setNewFilter(event.target.value)\n  }\n  const handleEdit = (person) => {\n    const newObject = personService.update(person)\n    newObject\n    .then(updatedPerson => {\n      setPersons(persons.map(person => (person.id !== updatedPerson.id ? person : updatedPerson)))\n      setNewName('')\n      setNewNumber('')\n      setError(false)\n      setMessage(`Changed number for ${newName}`)\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n    }).catch(error => {\n      setError(true)\n      console.log(error)\n      setMessage(`${person.name} removed already`)\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n      }).finally(() => {\n      setPersons(persons.map(p => (p.id !== person.id ? p : person)))\n    })\n  }\n  const addPerson = (event) => {\n    event.preventDefault()\n    console.log('button clicked', event.target)\n    console.log(newName)\n    console.log(newNumber)\n    const personToFind = persons.find(person => person.name === newName)\n    if(personToFind){\n      const response = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n      if(response) {\n        const person = persons.find(person => person.name === newName)\n        return handleEdit({ ...person, number:newNumber})\n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }\n      personService\n      .create(personObject)\n        .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setError(false)\n        setMessage(`Added ${newName}`)\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      }).catch(error => {\n        console.log(\"olen täällä\")\n        setError(true)\n        setMessage(error)\n        console.log(\"mutta en täällä\")\n        setTimeout(() => {\n          setMessage(null)\n        }, 5000)\n      })\n\n      \n    }\n  }\n  const handleRemove = (person) => {\n    const response = window.confirm(`Poistetaanko ${person.name}`)\n    if (response){\n      personService.remove(person).then(() => {\n        const newPersons = persons.filter(p => p.id !== person.id);\n        setPersons(newPersons)\n        setError(false)\n        console.log(error)\n        setMessage(`Removed ${person.name}`)\n      setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n      }).catch(error => {\n        setError(true)\n        console.log(error)\n        setMessage(`${person.name} removed already`)\n        setTimeout(() => {\n        setMessage(null)\n      }, 5000)\n      }).finally(() => {\n        const newPersons = persons.filter(poistettu => poistettu.id !== person.id)\n        setPersons(newPersons)\n      })\n    }\n  }\n\n \n  return (\n    <div>\n      <Alert message={message}error={error}></Alert>\n      <h2>Phonebook</h2>\n      <form onSubmit={setNewFilter}>\n        <div>\n          <Filter onFilterChange={handleFilterChange} filter={newFilter}/>\n        </div>\n      </form>\n      <h2>add a new</h2>\n      <form onSubmit={addPerson}>\n        <div>\n        name: <input value={newName}onChange={handleNameChange} />\n        </div>\n        <div>\n        number: <input value={newNumber}onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      <h2>Numbers</h2>\n        <div><Persons persons={persons}filter={newFilter}onRemove={handleRemove}/></div>\n    </div>\n  )\n\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}